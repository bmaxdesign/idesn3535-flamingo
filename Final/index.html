<!DOCTYPE html>
<html>
<head>
	<title>Final Project</title>

<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400" rel="stylesheet">

<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="  crossorigin="anonymous"></script>
<script src="utils.js"></script>
<link href="../normalize.css" rel="stylesheet"/>
<link href="styles.css" rel="stylesheet"/>

<script>
let savedResponse;

function clickSeason (seasonNum) {
	const currentSeason = savedResponse['season'+ seasonNum];
	$("#episode-list").html("");

	currentSeason.forEach(function(episode){
		const episodeDiv = document.createElement('div');
		$(episodeDiv).addClass("episodeStyle");

		const image = document.createElement('img');
		image.src = "http://www.bvandorn.com/idesn-3535/apis/flamingo.json" + episode.image.url;
		episodeDiv.append(image);



		episodeDiv.innerHTML = 
			image + '<br />' +
			"Episode: " + episode.title + '<br />' + '<br />' + 
			"SeasonxEpisode: " + episode.episode + '<br />' + 
			"Original Airdate: " + episode.airdate + '<br />'  + 
			" Stardate: " + episode.stardate + '<br />' + 
			episode.summary;
		
		$('#episode-list').append(episodeDiv);
		
	})


}






	$(document).ready(function(){
		$.ajax({
  url: "http://www.bvandorn.com/idesn-3535/apis/flamingo.json",
  success: function(response){
  	savedResponse=response;
    var seasons = Object.keys(response);
    for (let i=0; i<seasons.length; i++){
    	const currentSeason = seasons[i];
    	
    	const seasonButton = document.createElement('button');
    	$(seasonButton).addClass("leftNav");
    	seasonButton.innerText = 'Season ' + (i + 1);
    	$(seasonButton).on('click',function(){
    		clickSeason(i+1);
    	});
    	$('#seasons').append(seasonButton);
    }

  }
});
});



</script>
</head>

<body>

<!-- Title and hamgurger menu -->
<header id='siteNav'>
	<h1>Star Trek Episodes</h1>
	<img src="hamburger2.png" alt="hamburger menu" style="width: 90px;height:60px; margin-top: 10px;">
</header>

<div id="searchSeries">
		<input type=text id="search" class="search" placeholder="Search"></input> 
		<button type="button" id="seriesButton">Series: Deep Space Nine</button>
	</div>

<!-- Search and Content -->
<div id='siteBody'>

	<div id="seasonSidebar">
		
		<div id="seasons">
		<!-- filled by script for API -->
		</div>
	
	</div>

	<div id="episode-list">
	<!-- filled by script for API -->
	</div>


</div>



</body>

</html>
